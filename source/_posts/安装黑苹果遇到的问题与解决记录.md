---
title: 安装黑苹果遇到的问题与解决记录
date: 2020-01-03 20:51:02
tags: ['系统','驱动','macOS']
---
# 前言--这篇文章讲了啥？
**这篇文件是我在安装黑苹果时遇到的问题与解决办法的总结**
**所以更注重的是发现问题 解决问题，关于黑苹果教程自己上网上找吧，资源非常多**
**所以安装方面可能就几句话带过了**

## 1. 硬件配置
| 电脑型号 | 戴尔 Inspiron 5680 台式电脑 | 
| ------ | ------ |
| 操作系统 | Windows 10 64位 家庭版 | 
| 处理器 | 英特尔 Core i5-8400 | 
| 主板 | 戴尔 0PXWHK（z370芯片组），找efi驱动首先按照这个主板来就行（z370） | 
| 内存 | 三星 DDR4 2400MHz / 金士顿 DDR4 2400MHz | 
| 硬盘 | 3块  东芝1T的机械硬盘（存放文件），SK hynix SC311 SATA 128GB（自带的win10系统）金士顿 480G （专门用来装黑苹果的） | 
| 显卡 | Nvidia GeForce GTX 1060 6GB | 
| 显示器 | 2k的显示器 （这个无所谓） | 
| 网卡 | 瑞昱 RTL8168/8111/8112 Gigabit Ethernet Controller / 戴尔 | 

## 2. 关于安装
**首先** 你得查你电脑硬件支不支持黑苹果，如果支持黑苹果再看支持到那个版本，我电脑只能支持到 10.13.6，再往上说是因为没有对应的N卡驱动了
**efi驱动的选择** 你很大程度找不到配置完全合适的`efi`文件，`efi`文件我主要是依据`cpu`来找的，也就是 i5 8400 z370 
![我用的这个](/images/安装黑苹果遇到的问题与解决记录/efi.png)
**黑苹果镜像选择** 我安装的是 集成了clover的版本 `macOS High Sierra 10.13.6 17G65 With Clover 4596` ,本来我要传百度网盘分享出来的，万恶的百度网盘不让上传超过4G的文件，所以自己下载去吧，网上资源一大把

# 二、我遇到的问题
## 1. 用U盘安装时，提示镜像资源过期（或者是什么镜像副本损坏之类的）
解决办法：左上的菜单栏有一项是终端，打开，断网（要不自己又同步回来了）然后输入 `date 102723252015.06 ` 
10 -> 月，27->日， 23->时， 25->分， 2015->年。
然后再次安装，成功 （但是会带来后面的一个问题，第二条说）

## 2. 选择硬盘2次安装时，提示 `安装器资源已过期，请重试`(我也不知道为啥我的是英文的)
这时用上面的方法就不行了，因为一打开终端，中间那个界面就消失了，不给你重试的机会，后来经过我N次的重试和摸索，解决方案如下：
1. 断网且将bios时间设置为2015年10月27（别的时间也行，不一定非这个）
2. 重新走上面的步骤，也就是u盘启动，抹掉要安装黑苹果的盘符（金士顿的硬盘），注意，格式选择为`APFS`,网上好多教程是 `macos扩展`，但我`macos扩展`有问题，所以我建议用`APFS`
3. 硬盘抹掉安装macos安装器成功后会自动重启，还是上面的步骤选择中英文，一些设置然后点安装后，就没有这个问题了

## 3. 显卡驱动
我的显卡是 GTX 1060ti 6G显存的，用的显卡驱动是` WebDriver-387.10.10.10.40.105`(官网下载,找到你显卡对应的驱动版本) 然后安装（基本就是一直下一步就可以），然后还需要在`clover configuration` 这个软件中，在`引导参数中（英文BOOT）`添加一个参数 nvda_drv=1，在 `System parameters` 勾选 **NV显卡web驱动**，重启即可

## 4. 关机不断电，鼠标键盘灯依然亮
这个我折腾了好久好久好久
1. 下载`NTFS.efi`和`OsxAptioFixDrv.efi`驱动，放在clover/drivers64UEFI目录下
2. 网上说执行上面一步就行了，但我的就不行，我把clover手动更新到 `r4586版本`才成功

## 5. clover主题修改
这个不是问题，用  cloverThemeManager 这个软件，教程自己搜很简单

## 6. 关于clover的升级
我现在的clover是中文的，不跟网上一样有些版本看不见，所以我手动升级的，
[关于手动升级教程](https://www.bilibili.com/video/av47477075)

## 7. 关于clover引导win10启动卡死的原因
没错，我的就是卡死了，经过我反复测试和思考，原因如下：
1. win10必须在 ** stat operation:READ ON**模式下，启动，否则会报 （未检测到硬盘，如果硬盘已存在则硬盘没有响应）  目录是 C:\windows\system32\logfiles\srt\srtTrail.txt 文件
![日志](/images/安装黑苹果遇到的问题与解决记录/2.jpg)

2. 但是黑苹果又必须在 ** stat operation:AHCI ** 模式才能启动

**解决方案：**
下载免AHCI补丁，这样就不用了开启AHCI模式了, 下载`AHCIPortInjector.kext` 这个文件，放在clover/kexts/other下面，就可以了 （**这个文件真的难下，找了好久才找到**），所以我存到了我的网盘并且贴心的提供了 [下载地址](https://pan.baidu.com/s/15pCx1J276Q68hFirALWVlQ) 提取码: iapw

这样就不用了开启 **stat operation:READ ON** 就可以了，这样win10和MACOS都能被clover引导启动了

## 8. clover引导win10 loading转动后黑屏，不显示锁屏页面（输入密码那页）
**概率** ：每次启动win10都要启动两回才能成功，第一回黑屏，第二回成功
**解决方案：** 在win10下关闭 快速启动 

## 9. 解决不了的问题 dell自检画面分辨率局低（独显没启动）
这是关闭 Secure boot 的后果，但是不关闭就不能用clover引导了，这个真没办法了

## 10. 声卡驱动
这个我下载了 `AudioDxe-64.efi` 这个驱动，也注入了 显卡ID，但就是没声音，暂未解决
